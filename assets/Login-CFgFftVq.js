import{r as p,u as x,j as s,c as j,e as R,b as F,p as H,d as D,q as I,s as q,t as B}from"./index-Bj6IjsBP.js";import{z as f,u as P,t as T,I as b}from"./Input-BPVwYEkj.js";import{v as $,u as U,G as z,x as y,H as O,D as Y,p as _,S as G}from"./Heading-CiWTgu_3.js";import{R as V,C as W}from"./Row-CkZGBLgn.js";import{A as J,u as K}from"./Anchor-D0RP_oZN.js";const N=$("h4");N.displayName="DivStyledAsH4";const S=p.forwardRef(({className:a,bsPrefix:e,as:t=N,...r},n)=>(e=x(e,"alert-heading"),s.jsx(t,{ref:n,className:j(a,e),...r})));S.displayName="AlertHeading";const C=p.forwardRef(({className:a,bsPrefix:e,as:t=J,...r},n)=>(e=x(e,"alert-link"),s.jsx(t,{ref:n,className:j(a,e),...r})));C.displayName="AlertLink";const L=p.forwardRef((a,e)=>{const{bsPrefix:t,show:r=!0,closeLabel:n="Close alert",closeVariant:l,className:m,children:d,variant:o="primary",onClose:i,dismissible:u,transition:c=y,...w}=K(a,{show:"onClose"}),g=x(t,"alert"),E=U(k=>{i&&i(!1,k)}),h=c===!0?y:c,v=s.jsxs("div",{role:"alert",...h?void 0:w,ref:e,className:j(m,g,o&&`${g}-${o}`,u&&`${g}-dismissible`),children:[u&&s.jsx(z,{onClick:E,"aria-label":n,variant:l}),d]});return h?s.jsx(h,{unmountOnExit:!0,...w,ref:void 0,in:r,children:v}):r?v:null});L.displayName="Alert";const A=Object.assign(L,{Link:C,Heading:S}),M=f.object({email:f.string().trim().min(1,{message:"Email address Is Required"}).email(),password:f.string().min(1,{message:"Password is Required"})}),Q=()=>{const a=R(),e=F(),[t,r]=H(),{error:n,loading:l,accessToken:m}=D(c=>c.auth),{register:d,handleSubmit:o,formState:{errors:i}}=P({mode:"onBlur",resolver:T(M)}),u=async c=>{t.get("message")&&r(""),a(q(c)).unwrap().then(()=>e("/"))};return p.useEffect(()=>()=>{a(I())},[a]),{error:n,loading:l,accessToken:m,formErrors:i,searchParams:t,register:d,handleSubmit:o,submitForm:u}},rs=()=>{var o,i;const{error:a,loading:e,accessToken:t,formErrors:r,searchParams:n,register:l,handleSubmit:m,submitForm:d}=Q();return t?s.jsx(B,{to:"/"}):s.jsxs(s.Fragment,{children:[s.jsx(O,{title:"User Login"}),s.jsx(V,{children:s.jsxs(W,{md:{span:6,offset:3},children:[n.get("message")==="account_created"&&s.jsx(A,{variant:"success",className:"text-center fw-medium",children:"Your account successfully created, please login"}),n.get("message")==="login_required"&&s.jsx(A,{variant:"success",className:"text-center fw-medium",children:"Your must login to view the content"}),s.jsxs(Y,{onSubmit:m(d),children:[s.jsx(b,{label:"Email address",type:"text",register:l,name:"email",error:(o=r.email)==null?void 0:o.message}),s.jsx(b,{label:"Password",type:"password",register:l,name:"password",error:(i=r.password)==null?void 0:i.message}),s.jsx(_,{variant:"success",type:"submit",style:{color:"white"},children:e==="pending"?s.jsxs(s.Fragment,{children:[s.jsx(G,{animation:"border",size:"sm"})," Loading..."]}):"Login"}),a&&s.jsx("p",{style:{color:"#DC3545",marginTop:"10px"},children:a})]})]})})]})};export{rs as default};
